<!DOCTYPE html>
<html lang="en" class="h-100">
<head>

  
  
  

  

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Angular wrapper">
  <meta property="og:description" content="The starting place on the web!">
  <meta property="og:image" content="https://michalferber.me/assets/img/profile.jpg">
  <meta name="description" content="The starting place on the web!">

  <title>Angular wrapper</title>

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">

  <!-- Theme style -->
  <script src="/assets/js/theme.js"></script>

  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">

  <!-- Bootstrap CSS CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">

  <!-- Animate CSS CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.css">

  <!-- Theme CSS -->
  <link rel="stylesheet" href="/assets/css/style.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/assets/css/custom.css">

</head>
<body class="h-100 d-flex flex-column">
  <nav class="navbar navbar-expand-lg px-1 align-items-center">
<div class="d-flex flex-nowrap w-100 align-items-center">    <!-- Home icon -->
    <a class="navbar" href="" style="--hover-color: #ff6f21; color: #6c757d;">
      <iconify-icon icon="octicon:home-24" width="32" height="32"></iconify-icon>
    </a>

    <!-- Search form (fills remaining space) -->
    <form class="flex-grow-1" action="https://google.com/search" method="GET" role="search" autocomplete="off">
      <div class="input-group">
        <!-- ① Move the search‑button here, before the input -->
        <button class="btn btn-secondary" type="submit" aria-label="Search">
          <i class="fas fa-search"></i>
        </button>
        <input type="search" name="q" class="form-control" placeholder="Search Google or type a URL"
          aria-label="Search" />
      </div>
    </form>

    <span id="theme-toggler" class="nav-item nav-link me-3" role="button" onclick="toggleTheme()"></span>

    <!-- User avatar -->
    <a href="https://accounts.google.com/SignOutOptions" class="d-flex align-items-center">
      <img src="/assets/img/profile.png" class="rounded-circle" alt="Michal Ferber" width="36" height="36" />
    </a>

  </div>

</nav>

  <!-- Weather widget -->
<div class="weather-widget">
    <a class="weatherwidget-io" href="https://forecast7.com/en/33d87n79d76/lake-city/?unit=us"
        data-label_1="Lake City, SC" data-label_2="29560" data-theme="original">Lake City, SC 29560</a>
    <script>
        !function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (!d.getElementById(id)) {
                js = d.createElement(s);
                js.id = id;
                js.src = 'https://weatherwidget.io/js/widget.min.js';
                fjs.parentNode.insertBefore(js, fjs);
            }
        }(document, 'script', 'weatherwidget-io-js');
    </script>
</div>
  <!-- desktop sidebar / hide on mobile -->
  <div id="social-sidebar">
  


<a class="social-link" href="https://www.github.com/MichalAFerber" style="color:#6c757d"
  onmouseover="this.style.color='#ff6f21'" onmouseout="this.style.color='#6c757d'"
  target="_blank" rel="noopener">
  <iconify-icon icon="octicon:mark-github-24" width="28" height="28" style="color: inherit;"></iconify-icon>
</a>


<a class="social-link" href="https://stackoverflow.com/" style="color:#6c757d"
  onmouseover="this.style.color='#f48024'" onmouseout="this.style.color='#6c757d'"
  target="_blank" rel="noopener">
  <iconify-icon icon="logos:stackoverflow-icon" width="28" height="28" style="color: inherit;"></iconify-icon>
</a>


<a class="social-link" href="https://www.twitter.com/MichalAFerber" style="color:#6c757d"
  onmouseover="this.style.color='#1da1f2'" onmouseout="this.style.color='#6c757d'"
  target="_blank" rel="noopener">
  <iconify-icon icon="streamline-logos:x-twitter-logo" width="28" height="28" style="color: inherit;"></iconify-icon>
</a>


<a class="social-link" href="https://www.youtube.com/@MichalAFerber" style="color:#6c757d"
  onmouseover="this.style.color='#ff0000'" onmouseout="this.style.color='#6c757d'"
  target="_blank" rel="noopener">
  <iconify-icon icon="logos:youtube-icon" width="28" height="28" style="color: inherit;"></iconify-icon>
</a>


<a class="social-link" href="https://www.keybase.io/MichalAFerber" style="color:#6c757d"
  onmouseover="this.style.color='#ff6f21'" onmouseout="this.style.color='#6c757d'"
  target="_blank" rel="noopener">
  <iconify-icon icon="simple-icons:keybase" width="28" height="28" style="color: inherit;"></iconify-icon>
</a>


<a class="social-link" href="https://t.me/MichalAFerber" style="color:#6c757d"
  onmouseover="this.style.color='#0088cc'" onmouseout="this.style.color='#6c757d'"
  target="_blank" rel="noopener">
  <iconify-icon icon="logos:telegram" width="28" height="28" style="color: inherit;"></iconify-icon>
</a>


<a class="social-link" href="mailto:michal@michalferber.me" style="color:#6c757d"
  onmouseover="this.style.color='#db4437'" onmouseout="this.style.color='#6c757d'"
  target="_blank" rel="noopener">
  <iconify-icon icon="octicon:mail-24" width="28" height="28" style="color: inherit;"></iconify-icon>
</a>


</div>
  <!-- mobile inline / hide on desktop -->
  <div id="social-inline">
    


<a class="social-link" href="https://www.github.com/MichalAFerber" style="color:#6c757d"
  onmouseover="this.style.color='#ff6f21'" onmouseout="this.style.color='#6c757d'"
  target="_blank" rel="noopener">
  <iconify-icon icon="octicon:mark-github-24" width="28" height="28" style="color: inherit;"></iconify-icon>
</a>


<a class="social-link" href="https://stackoverflow.com/" style="color:#6c757d"
  onmouseover="this.style.color='#f48024'" onmouseout="this.style.color='#6c757d'"
  target="_blank" rel="noopener">
  <iconify-icon icon="logos:stackoverflow-icon" width="28" height="28" style="color: inherit;"></iconify-icon>
</a>


<a class="social-link" href="https://www.twitter.com/MichalAFerber" style="color:#6c757d"
  onmouseover="this.style.color='#1da1f2'" onmouseout="this.style.color='#6c757d'"
  target="_blank" rel="noopener">
  <iconify-icon icon="streamline-logos:x-twitter-logo" width="28" height="28" style="color: inherit;"></iconify-icon>
</a>


<a class="social-link" href="https://www.youtube.com/@MichalAFerber" style="color:#6c757d"
  onmouseover="this.style.color='#ff0000'" onmouseout="this.style.color='#6c757d'"
  target="_blank" rel="noopener">
  <iconify-icon icon="logos:youtube-icon" width="28" height="28" style="color: inherit;"></iconify-icon>
</a>


<a class="social-link" href="https://www.keybase.io/MichalAFerber" style="color:#6c757d"
  onmouseover="this.style.color='#ff6f21'" onmouseout="this.style.color='#6c757d'"
  target="_blank" rel="noopener">
  <iconify-icon icon="simple-icons:keybase" width="28" height="28" style="color: inherit;"></iconify-icon>
</a>


<a class="social-link" href="https://t.me/MichalAFerber" style="color:#6c757d"
  onmouseover="this.style.color='#0088cc'" onmouseout="this.style.color='#6c757d'"
  target="_blank" rel="noopener">
  <iconify-icon icon="logos:telegram" width="28" height="28" style="color: inherit;"></iconify-icon>
</a>


<a class="social-link" href="mailto:michal@michalferber.me" style="color:#6c757d"
  onmouseover="this.style.color='#db4437'" onmouseout="this.style.color='#6c757d'"
  target="_blank" rel="noopener">
  <iconify-icon icon="octicon:mail-24" width="28" height="28" style="color: inherit;"></iconify-icon>
</a>


  </div>
  <main>
    <div class="col-lg-10 mx-auto mt-5 markdown-body">
  <h1 id="angular-wrapper">Angular wrapper</h1>

<p>The Angular <a href="projects/lib/src/lib/gridstack.component.ts">wrapper component</a> <gridstack> is a <b>better way to use Gridstack</b>, but alternative raw [ngFor](projects/demo/src/app/ngFor.ts) or [simple](projects/demo/src/app/simple.ts) demos are also given.</gridstack></p>

<h1 id="dynamic-grid-items">Dynamic grid items</h1>

<p>this is the recommended way if you are going to have multiple grids (alow drag&amp;drop between) or drag from toolbar to create items, or drag to remove items, etc…</p>

<p>I.E. don’t use Angular templating to create grid items as that is harder to sync when gridstack will also add/remove items.</p>

<p>MyComponent HTML</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;gridstack</span> <span class="na">[options]=</span><span class="s">"gridOptions"</span><span class="nt">&gt;&lt;/gridstack&gt;</span>
</code></pre></div></div>

<p>MyComponent CSS</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">@import</span> <span class="s1">"gridstack/dist/gridstack.min.css"</span><span class="p">;</span>

<span class="nc">.grid-stack</span> <span class="p">{</span>
  <span class="nl">background</span><span class="p">:</span> <span class="m">#fafad2</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.grid-stack-item-content</span> <span class="p">{</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#18bc9c</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Standalone MyComponent Code</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">GridStackOptions</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">gridstack</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GridstackComponent</span><span class="p">,</span> <span class="nx">GridstackItemComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">gridstack/dist/angular</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span> <span class="c1">// SKIP if doing module import instead (next)</span>
    <span class="nx">GridstackComponent</span><span class="p">,</span>
    <span class="nx">GridstackItemComponent</span>
  <span class="p">]</span>
  <span class="p">...</span>
 <span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">MyComponent</span> <span class="p">{</span>
  <span class="c1">// sample grid options + items to load...</span>
  <span class="k">public</span> <span class="nx">gridOptions</span><span class="p">:</span> <span class="nx">GridStackOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">margin</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="na">children</span><span class="p">:</span> <span class="p">[</span> <span class="c1">// or call load(children) or addWidget(children[0]) with same data</span>
      <span class="p">{</span><span class="na">x</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="na">minW</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="na">content</span><span class="p">:</span><span class="dl">'</span><span class="s1">Item 1</span><span class="dl">'</span><span class="p">},</span>
      <span class="p">{</span><span class="na">x</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="na">content</span><span class="p">:</span><span class="dl">'</span><span class="s1">Item 2</span><span class="dl">'</span><span class="p">},</span>
      <span class="p">{</span><span class="na">x</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="na">content</span><span class="p">:</span><span class="dl">'</span><span class="s1">Item 3</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">]</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></div>

<p>IF doing module import instead of standalone, you will also need this:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">GridstackModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">gridstack/dist/angular</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span><span class="nx">GridstackModule</span><span class="p">,</span> <span class="p">...]</span>
  <span class="p">...</span>
  <span class="na">bootstrap</span><span class="p">:</span> <span class="p">[</span><span class="nx">AppComponent</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div></div>

<h1 id="more-complete-example">More Complete example</h1>

<p>In this example (build on previous one) will use your actual custom angular components inside each grid item (instead of dummy html content) and have per component saved settings as well (using BaseWidget).</p>

<p>HTML</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;gridstack</span> <span class="na">[options]=</span><span class="s">"gridOptions"</span> <span class="na">(changeCB)=</span><span class="s">"onChange($event)"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">empty-content</span><span class="nt">&gt;</span>message when grid is empty<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/gridstack&gt;</span>
</code></pre></div></div>

<p>Code</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GridStack</span><span class="p">,</span> <span class="nx">GridStackOptions</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">gridstack</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GridstackComponent</span><span class="p">,</span> <span class="nx">gsCreateNgComponents</span><span class="p">,</span> <span class="nx">NgGridStackWidget</span><span class="p">,</span> <span class="nx">nodesCB</span><span class="p">,</span> <span class="nx">BaseWidget</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">gridstack/dist/angular</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// some custom components</span>
<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app-a</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">template</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Comp A </span><span class="dl">'</span><span class="p">,</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AComponent</span> <span class="kd">extends</span> <span class="nx">BaseWidget</span> <span class="k">implements</span> <span class="nx">OnDestroy</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Input</span><span class="p">()</span> <span class="nx">text</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// test custom input data</span>
  <span class="k">public</span> <span class="nx">override</span> <span class="nx">serialize</span><span class="p">():</span> <span class="nx">NgCompInputs</span> <span class="o">|</span> <span class="kc">undefined</span>  <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">text</span> <span class="p">?</span> <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">text</span><span class="p">}</span> <span class="p">:</span> <span class="kc">undefined</span><span class="p">;</span> <span class="p">}</span>
  <span class="nx">ngOnDestroy</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Comp A destroyed</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// test to make sure cleanup happens</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app-b</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">template</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Comp B</span><span class="dl">'</span><span class="p">,</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">BComponent</span> <span class="kd">extends</span> <span class="nx">BaseWidget</span> <span class="p">{</span>
<span class="p">}</span>

<span class="c1">// ...in your module (classic), OR your ng19 app.config provideEnvironmentInitializer call this:</span>
<span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// register all our dynamic components types created by the grid</span>
  <span class="nx">GridstackComponent</span><span class="p">.</span><span class="nx">addComponentToSelectorType</span><span class="p">([</span><span class="nx">AComponent</span><span class="p">,</span> <span class="nx">BComponent</span><span class="p">])</span> <span class="p">;</span>
<span class="p">}</span>

<span class="c1">// now our content will use Components instead of dummy html content</span>
<span class="k">public</span> <span class="nx">gridOptions</span><span class="p">:</span> <span class="nx">NgGridStackOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">margin</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="na">minRow</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// make space for empty message</span>
  <span class="na">children</span><span class="p">:</span> <span class="p">[</span> <span class="c1">// or call load()/addWidget() with same data</span>
    <span class="p">{</span><span class="na">x</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="na">minW</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="na">selector</span><span class="p">:</span><span class="dl">'</span><span class="s1">app-a</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">x</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="na">minW</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="na">selector</span><span class="p">:</span><span class="dl">'</span><span class="s1">app-a</span><span class="dl">'</span><span class="p">,</span> <span class="na">input</span><span class="p">:</span> <span class="p">{</span> <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bar</span><span class="dl">'</span> <span class="p">}},</span> <span class="c1">// custom input that works using BaseWidget.deserialize() Object.assign(this, w.input)</span>
    <span class="p">{</span><span class="na">x</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="na">selector</span><span class="p">:</span><span class="dl">'</span><span class="s1">app-b</span><span class="dl">'</span><span class="p">},</span>
    <span class="p">{</span><span class="na">x</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="na">content</span><span class="p">:</span><span class="dl">'</span><span class="s1">plain html</span><span class="dl">'</span><span class="p">},</span>
  <span class="p">]</span>
<span class="p">}</span>

<span class="c1">// called whenever items change size/position/etc.. see other events</span>
<span class="k">public</span> <span class="nx">onChange</span><span class="p">(</span><span class="nx">data</span><span class="p">:</span> <span class="nx">nodesCB</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">change </span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">nodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">?</span> <span class="nx">data</span><span class="p">.</span><span class="nx">nodes</span> <span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="ngfor-with-wrapper">ngFor with wrapper</h1>

<p>For simple case where you control the children creation (gridstack doesn’t do create or re-parenting)</p>

<p>HTML</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;gridstack</span> <span class="na">[options]=</span><span class="s">"gridOptions"</span> <span class="na">(changeCB)=</span><span class="s">"onChange($event)"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- Angular 17+ --&gt;</span>
   @for (n of items; track n.id) {
    <span class="nt">&lt;gridstack-item</span> <span class="na">[options]=</span><span class="s">"n"</span><span class="nt">&gt;</span>Item <span class="nt">&lt;/gridstack-item&gt;</span>
  }
  <span class="c">&lt;!-- Angular 16 --&gt;</span>
  <span class="nt">&lt;gridstack-item</span> <span class="na">*ngFor=</span><span class="s">"let n of items; trackBy: identify"</span> <span class="na">[options]=</span><span class="s">"n"</span><span class="nt">&gt;</span> Item  <span class="nt">&lt;/gridstack-item&gt;</span>
<span class="nt">&lt;/gridstack&gt;</span>
</code></pre></div></div>

<p>Code</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">GridStackOptions</span><span class="p">,</span> <span class="nx">GridStackWidget</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">gridstack</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">nodesCB</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">gridstack/dist/angular</span><span class="dl">'</span><span class="p">;</span>

<span class="cm">/** sample grid options and items to load... */</span>
<span class="kr">public</span> <span class="nx">gridOptions</span><span class="p">:</span> <span class="nx">GridStackOptions</span> <span class="o">=</span> <span class="p">{</span> <span class="na">margin</span><span class="p">:</span> <span class="mi">5</span> <span class="p">}</span>
<span class="kr">public</span> <span class="nx">items</span><span class="p">:</span> <span class="nx">GridStackWidget</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="na">x</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="na">minW</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="na">id</span><span class="p">:</span><span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">},</span> <span class="c1">// must have unique id used for trackBy</span>
  <span class="p">{</span><span class="na">x</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="na">id</span><span class="p">:</span><span class="dl">'</span><span class="s1">2</span><span class="dl">'</span><span class="p">},</span>
  <span class="p">{</span><span class="na">x</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="na">id</span><span class="p">:</span><span class="dl">'</span><span class="s1">3</span><span class="dl">'</span><span class="p">},</span>
<span class="p">];</span>

<span class="c1">// called whenever items change size/position/etc..</span>
<span class="kr">public</span> <span class="nx">onChange</span><span class="p">(</span><span class="nx">data</span><span class="p">:</span> <span class="nx">nodesCB</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">change </span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">nodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">?</span> <span class="nx">data</span><span class="p">.</span><span class="nx">nodes</span> <span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="p">}</span>

<span class="c1">// ngFor unique node id to have correct match between our items used and GS</span>
<span class="kr">public</span> <span class="nx">identify</span><span class="p">(</span><span class="nx">index</span><span class="p">:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">w</span><span class="p">:</span> <span class="nx">GridStackWidget</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">w</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span> <span class="c1">// or use index if no id is set and you only modify at the end...</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="demo">Demo</h2>

<p>You can see a fuller example at <a href="projects/demo/src/app/app.component.ts">app.component.ts</a></p>

<p>to build the demo, go to <a href="projects/demo/">angular/projects/demo</a> and run <code class="language-plaintext highlighter-rouge">yarn</code> + <code class="language-plaintext highlighter-rouge">yarn start</code> and navigate to <code class="language-plaintext highlighter-rouge">http://localhost:4200/</code></p>

<p>Code started shipping with v8.1.2+ in <code class="language-plaintext highlighter-rouge">dist/angular</code> for people to use directly and is an angular module! (source code under <code class="language-plaintext highlighter-rouge">dist/angular/src</code>)</p>

<h2 id="caveats">Caveats</h2>

<ul>
  <li>This wrapper needs:
    <ul>
      <li>gridstack v8+ to run as it needs the latest changes (use older version that matches GS versions)</li>
      <li><b>Angular 14+</b> for dynamic <code class="language-plaintext highlighter-rouge">createComponent()</code> API and Standalone Components (verified against 19+)</li>
    </ul>
  </li>
</ul>

<p>NOTE: if you are on Angular 13 or below: copy the wrapper code over (or patch it - see main page example) and change <code class="language-plaintext highlighter-rouge">createComponent()</code> calls to use old API instead:
NOTE2: now that we’re using standalone, you will also need to remove <code class="language-plaintext highlighter-rouge">standalone: true</code> and <code class="language-plaintext highlighter-rouge">imports</code> on each component so you will to copy those locally (or use &lt;11.1.2 version)</p>
<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">protected</span> <span class="nx">resolver</span><span class="p">:</span> <span class="nx">ComponentFactoryResolver</span><span class="p">,</span>
<span class="p">...</span>
<span class="kd">const</span> <span class="nx">factory</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">resolver</span><span class="p">.</span><span class="nx">resolveComponentFactory</span><span class="p">(</span><span class="nx">GridItemComponent</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">gridItemRef</span> <span class="o">=</span> <span class="nx">grid</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">createComponent</span><span class="p">(</span><span class="nx">factory</span><span class="p">)</span> <span class="k">as</span> <span class="nx">ComponentRef</span><span class="o">&lt;</span><span class="nx">GridItemComponent</span><span class="o">&gt;</span><span class="p">;</span>
<span class="c1">// ...do the same for widget selector...</span>
</code></pre></div></div>

<h2 id="ngfor-caveats">ngFor Caveats</h2>

<ul>
  <li>This wrapper handles well ngFor loops, but if you’re using a trackBy function (as I would recommend) and no element id change after an update,
you must manually update the <code class="language-plaintext highlighter-rouge">GridstackItemComponent.option</code> directly - see <a href="./projects/demo/src/app/app.component.ts#L202">modifyNgFor()</a> example.</li>
  <li>The original client list of items is not updated to match <strong>content</strong> changes made by gridstack (TBD later), but adding new item or removing (as shown in demo) will update those new items. Client could use change/added/removed events to sync that list if they wish to do so.</li>
</ul>

<p>Would appreciate getting help doing the same for React and Vue (2 other popular frameworks)</p>

<p>-Alain</p>

</div>
  </main>
  <footer class="mt-auto py-3 text-center">

  <small class="text-muted mb-2">
    <i class="fas fa-code"></i> with <i class="fas fa-heart"></i>
    by <strong>Michal Ferber</strong>
  </small>
</footer>
  <!-- Iconify (for your sidebar icons) -->
<script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>

<!-- jQuery, Popper, Bootstrap -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>


<!-- Dashboard (depends on Gridstack.js) -->
<!-- <script src="/assets/js/dashboard.js"></script> -->

<!-- wow.js & activate tooltips -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.js"></script>
<script> new WOW().init(); </script>
<script> $(function () { $('[data-toggle="tooltip"]').tooltip(); }); </script>
</body>
</html>