<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>MyKK Start Page</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />

    <link rel="icon" href="assets/img/favicon.ico" type="image/x-icon" />

    <!-- Baseline + framework -->
    <link rel="stylesheet" href="https://unpkg.com/missing.css@1.2.0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css" />

    <!-- Your styles (last wins) -->
    <link rel="stylesheet" href="assets/css/site.css" />
    <link rel="stylesheet" href="assets/css/custom.css?v=4" />

    <!-- Utilities -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js" defer></script>
    <script src="https://code.iconify.design/3/3.1.1/iconify.min.js" defer></script>

    <style>
        .visually-hidden {
            position: absolute !important;
            height: 1px;
            width: 1px;
            overflow: hidden;
            clip: rect(1px, 1px, 1px, 1px);
            white-space: nowrap;
            border: 0;
            padding: 0;
            margin: -1px
        }

        .visually-hidden-focusable:active,
        .visually-hidden-focusable:focus {
            position: static !important;
            height: auto;
            width: auto;
            clip: auto;
            margin: 0;
            white-space: normal
        }
    </style>
</head>

<body>
    <!-- Skip link -->
    <a class="visually-hidden visually-hidden-focusable" href="#main">Skip to content</a>

    <!-- Header / search / profile -->
    <header class="py-2 px-3 d-flex justify-content-between align-items-center">
        <nav class="navbar navbar-transparent" role="navigation" aria-label="Primary">
            <form id="search-form" role="search" aria-label="Site search" class="position-relative">
                <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"
                    style="position:absolute;left:1em;top:50%;transform:translateY(-50%);" width="24" height="24"
                    viewBox="0 0 24 24">
                    <path fill="currentColor"
                        d="m19.6 21l-6.3-6.3q-.75.6-1.725.95T9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l6.3 6.3zM9.5 14q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14" />
                </svg>
                <label class="visually-hidden" for="search-input">Search</label>
                <input id="search-input" type="text" placeholder="Search the webâ€¦" autocomplete="off" />
            </form>
        </nav>

        <div class="nav-right d-flex align-items-center gap-2">
            <div id="login-btn" style="display:none;">
                <a href="/auth/google" class="btn btn-primary btn-sm">
                    <span class="fa fa-google" aria-hidden="true"></span>
                    <span class="ms-1">Sign in</span>
                </a>
            </div>

            <div id="profile-btn" style="display:none; position:relative;">
                <button id="settings-btn" type="button"
                    class="btn btn-outline-secondary btn-sm d-flex align-items-center gap-2" aria-haspopup="menu"
                    aria-expanded="false" aria-controls="profile-menu">
                    <img id="profile-pic" src="" width="28" height="28" class="rounded-circle" alt="Profile picture" />
                    <span class="visually-hidden">Open profile menu</span>
                    <span class="fa fa-caret-down" aria-hidden="true"></span>
                </button>

                <div id="profile-menu" class="profile-menu card p-2" role="menu" aria-labelledby="settings-btn" hidden
                    style="position:absolute;right:0;top:calc(100% + .25rem);min-width:12rem;z-index:10;">
                    <button role="menuitem" id="settings-open-btn" type="button"
                        class="btn btn-link text-start w-100">Settings</button>
                    <button role="menuitem" id="logout-btn" type="button" class="btn btn-link text-start w-100">Switch
                        Account</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main -->
    <main id="main" tabindex="-1">
        <!-- Shortcuts panel (wide frosted card) -->
        <section class="shortcuts-panel" aria-labelledby="shortcuts-label">
            <h2 id="shortcuts-label" class="visually-hidden">Shortcuts</h2>
            <div class="container text-center">
                <div id="shortcuts" class="row row-cols-auto justify-content-center shortcuts"></div>
            </div>
        </section>
    </main>

    <!-- Add Shortcut Modal -->
    <div class="modal fade" id="addShortcutModal" tabindex="-1" aria-labelledby="addShortcutModalLabel" role="dialog"
        aria-modal="true">
        <div class="modal-dialog">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title" id="addShortcutModalLabel">Add Shortcut</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <form id="addShortcutForm">
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="addShortcutName" class="form-label">Name</label>
                            <input type="text" class="form-control bg-secondary text-white" id="addShortcutName"
                                required />
                        </div>
                        <div class="mb-3">
                            <label for="addShortcutURL" class="form-label">URL</label>
                            <input type="url" class="form-control bg-secondary text-white" id="addShortcutURL"
                                required />
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Rename Shortcut Modal -->
    <div class="modal fade" id="renameShortcutModal" tabindex="-1" aria-labelledby="renameShortcutModalLabel"
        role="dialog" aria-modal="true">
        <div class="modal-dialog">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title" id="renameShortcutModalLabel">Edit Shortcut</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <form id="renameShortcutForm">
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="renameShortcutName" class="form-label">Name</label>
                            <input type="text" class="form-control bg-secondary text-white" id="renameShortcutName"
                                required />
                        </div>
                        <div class="mb-3">
                            <label for="renameShortcutURL" class="form-label">URL</label>
                            <input type="url" class="form-control bg-secondary text-white" id="renameShortcutURL"
                                required />
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Preferences Modal -->
    <div class="modal fade" id="prefsModal" tabindex="-1" aria-labelledby="prefsModalLabel" role="dialog"
        aria-modal="true">
        <div class="modal-dialog">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title" id="prefsModalLabel">Preferences</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <form id="prefsForm" enctype="multipart/form-data">
                    <div class="modal-body">
                        <div class="mb-3">
                            <label class="form-label">Show Weather Widget:</label>
                            <select name="weatherOn" class="form-select bg-secondary text-white">
                                <option value="true">On</option>
                                <option value="false">Off</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Upload Wallpaper:</label>
                            <input type="file" name="wallpaper" accept="image/*"
                                class="form-control bg-secondary text-white" />
                            <div id="currentWall" style="margin:10px 0;"></div>
                            <button type="button" id="deleteWallBtn" class="btn btn-sm btn-danger mt-2"
                                style="display:none;">
                                Delete Wallpaper
                            </button>
                            <input type="hidden" name="deleteWallpaper" id="deleteWallpaperField" value="false" />
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Search Engine:</label>
                            <select name="searchEngine" class="form-select bg-secondary text-white">
                                <option value="google">Google</option>
                                <option value="ddg">DuckDuckGo</option>
                                <option value="bing">Bing</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Preferences</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Shortcut Context Menu -->
    <div id="shortcutMenu" class="shortcut-menu card p-2" hidden role="menu" aria-label="Shortcut menu">
        <button id="menuEdit" role="menuitem" class="btn btn-link text-start w-100" type="button">Edit</button>
        <button id="menuRemove" role="menuitem" class="btn btn-link text-start w-100" type="button">Remove</button>
    </div>

    <!-- Weather ribbon container -->
    <div id="weather-container" style="display:none;"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/app.js?v=4"></script>

    <!-- WeatherWidget.io loader (needed for ribbon) -->
    <script id="weatherwidget-io-js" src="https://weatherwidget.io/js/widget.min.js"></script>
</body>

</html>